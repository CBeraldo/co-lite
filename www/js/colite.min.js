!function(){"use strict";function e(){var e=this;return e.isDeviceReady=!1,e.connect=function(){if(t){var e={name:"database.db",location:"default",bgType:1};return $cordovaSQLite.openDB(e)}},e.execute=function(r,o){return t?$cordovaSQLite.execute(e.connect(),r,o):{then:function(){return{catch:function(){}}}}},e.deviceready=function(t){e.isDeviceReady?t():document.addEventListener("deviceready",function(){t()},!1)},e.deviceready(function(t){e.isDeviceReady=!0}),e.orm={drop:function(){var t=["DROP TABLE IF EXISTS",this.displayName].join("  ");return e.execute(t)},create:function(){var t=this,r=[];Object.keys(t.prototype).forEach(function(e,o){var n="",i=t.base[e];n=[n,e,i.type].join(" "),n=i.allowNulls?[n,"NULL"].join(" "):[n,"NOT NULL"].join(" "),i.primaryKey?n=[n,"PRIMARY KEY AUTOINCREMENT"].join(" "):i.uniqueKey&&(n=[n,"UNIQUE"].join(" ")),r.push(n)});var o=["CREATE TABLE IF NOT EXISTS",this.displayName,"(",r.join(", "),")"].join("  ");return e.execute(o)},insert:function(t){var r=this,o=[],n=[];Object.keys(r.prototype).forEach(function(e,r){"id"!=e&&(o.push(e),n.push(t[e]))});var i=" insert into {0} ( {1} ) values ( ? {2} ) ".format(r.displayName,o.join(", "),", ?".repeat(n.length-1));return e.execute(i,n)},update:function(t){var r=this,o=[],n=[];Object.keys(r.prototype).forEach(function(e,r){"id"!=e&&(o.push(e+" = ?"),n.push(t[e]))}),n.push(t.id);var i=" update {0} set {1} where id = ? ".format(r.displayName,o.join(", "));return e.execute(i,n)},delete:function(t){var r=this,o=" delete from {0} where id = ? ".format(r.displayName);return e.execute(o,[t])},select:function(t){var r=" select * from {0} ".format([this.displayName]);return t?(r+=" where id = ? ",e.execute(r,[t])):e.execute(r)}},e.implement=function(t,r,o){function n(){}return Object.keys(r).forEach(function(e){n.prototype[e]=null}),n.prototype.id=null,n.displayName=t,n.base=r,n.drop=e.orm.drop,n.create=e.orm.create,n.insert=e.orm.insert,n.update=e.orm.update,n.delete=e.orm.delete,n.select=e.orm.select,e.deviceready(function(){o&&n.drop(),n.create()}),n},{deviceready:e.deviceready,implement:e.implement}}var t="browser"!=cordova.platformId;String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})}),String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",r=this,o=0;o<e;o++)t+=r;return t});angular.module("Colite",["ngCordova"]).service("$colite",e).constant("Colite",{STRING:"STRING",INTEGER:"INTEGER",DATE:"DATE",DATETIME:"DATETIME",BIGINT:"BIGINT",DECIMAL:"NUMERIC",TEXT:"TEXT"});console.log(cordova.platformId),t&&(e.$inject=["$cordovaSQLite"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGl0ZS5qcyJdLCJuYW1lcyI6WyJDb2xpdGUiLCJ2bSIsInRoaXMiLCJpc0RldmljZVJlYWR5IiwiY29ubmVjdCIsImlzQnJvd3NlciIsImNvbmZpZyIsIm5hbWUiLCJsb2NhdGlvbiIsImJnVHlwZSIsIiRjb3Jkb3ZhU1FMaXRlIiwib3BlbkRCIiwiZXhlY3V0ZSIsInF1ZXJ5IiwidmFsdWVzIiwidGhlbiIsImNhdGNoIiwiZGV2aWNlcmVhZHkiLCJjYWxsYmFjayIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9ybSIsImRyb3AiLCJkaXNwbGF5TmFtZSIsImpvaW4iLCJjcmVhdGUiLCJtb2RlbCIsIk9iamVjdCIsImtleXMiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJwcm9wIiwicHJvcE9iaiIsImJhc2UiLCJ0eXBlIiwiYWxsb3dOdWxscyIsInByaW1hcnlLZXkiLCJ1bmlxdWVLZXkiLCJwdXNoIiwiaW5zZXJ0Iiwib2JqZWN0IiwiZm9ybWF0IiwicmVwZWF0IiwibGVuZ3RoIiwidXBkYXRlIiwiaWQiLCJkZWxldGUiLCJzZWxlY3QiLCJpbXBsZW1lbnQiLCJmb3JjZSIsImNvcmRvdmEiLCJwbGF0Zm9ybUlkIiwiU3RyaW5nIiwiYXJncyIsImFyZ3VtZW50cyIsInJlcGxhY2UiLCJtYXRjaCIsIm51bWJlciIsInN0ciIsImkiLCJhbmd1bGFyIiwibW9kdWxlIiwic2VydmljZSIsImNvbnN0YW50IiwiU1RSSU5HIiwiSU5URUdFUiIsIkRBVEUiLCJEQVRFVElNRSIsIkJJR0lOVCIsIkRFQ0lNQUwiLCJURVhUIiwiY29uc29sZSIsImxvZyIsIiRpbmplY3QiXSwibWFwcGluZ3MiOiJDQUFDLFdBQ0csWUErQ0EsU0FBU0EsS0FDTCxHQUFJQyxHQUFLQyxJQXlKVCxPQXZKQUQsR0FBR0UsZUFBZ0IsRUFFbkJGLEVBQUdHLFFBQVUsV0FDVCxHQUFJQyxFQUFXLENBQ1gsR0FBSUMsSUFBV0MsS0FBTSxjQUFlQyxTQUFV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cEJJLEVBQU1ELE9BQVN4QixFQUFHb0IsSUFBSUksT0FDdEJDLEVBQU1lLE9BQVN4QyxFQUFHb0IsSUFBSW9CLE9BQ3RCZixFQUFNb0IsT0FBUzdDLEVBQUdvQixJQUFJeUIsT0FDdEJwQixFQUFNc0IsT0FBUy9DLEVBQUdvQixJQUFJMkIsT0FDdEJ0QixFQUFNdUIsT0FBU2hELEVBQUdvQixJQUFJNEIsT0FFdEJoRCxFQUFHZ0IsWUFBWSxXQUNQa0MsR0FDQXpCLEVBQU1KLE9BQ1ZJLEVBQU1ELFdBR0hDLElBSVBULFlBQWFoQixFQUFHZ0IsWUFDaEJpQyxVQUFXakQsRUFBR2lELFdBek10QixHQUFJN0MsR0FBbUMsV0FBdEIrQyxRQUFRQyxVQUVwQkMsUUFBT3pCLFVBQVVjLFNBQ2xCVyxPQUFPekIsVUFBVWMsT0FBUyxXQUN0QixHQUFJWSxHQUFPQyxTQUNYLE9BQU90RCxNQUFLdUQsUUFBUSxXQUFZLFNBQVNDLEVBQU9DLEdBQzVDLFdBQThCLEtBQWhCSixFQUFLSSxHQUNmSixFQUFLSSxHQUNMRCxNQUlYSixPQUFPekIsVUFBVWUsU0FDbEJVLE9BQU96QixVQUFVZSxPQUFTLFNBQVNDLEdBSS9CLElBQUssR0FIRGUsR0FBTSxHQUNOaEIsRUFBUzFDLEtBRUoyRCxFQUFJLEVBQUdBLEVBQUloQixFQUFRZ0IsSUFDeEJELEdBQVloQixDQUdoQixPQUFPZ0IsSUFJRkUsU0FDUkMsT0FBTyxVQUFXLGNBRWxCQyxRQUFRLFVBQVdoRSxHQUVuQmlFLFNBQVMsVUFDTkMsT0FBUSxTQUNSQyxRQUFTLFVBQ1RDLEtBQU0sT0FDTkMsU0FBVSxXQUNWQyxPQUFRLFNBQ1JDLFFBQVMsVUFDVEMsS0FBTSxRQUdkQyxTQUFRQyxJQUFJdEIsUUFBUUMsWUFDaEJoRCxJQUNBTCxFQUFPMkUsU0FBVyIsImZpbGUiOiJjb2xpdGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gICAgdmFyIGlzQnJvd3NlciA9IChjb3Jkb3ZhLnBsYXRmb3JtSWQgIT0gJ2Jyb3dzZXInKTtcclxuXHJcbiAgICBpZiAoIVN0cmluZy5wcm90b3R5cGUuZm9ybWF0KSB7XHJcbiAgICAgICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9ICd1bmRlZmluZWQnID9cclxuICAgICAgICAgICAgICAgICAgICBhcmdzW251bWJlcl0gOlxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFTdHJpbmcucHJvdG90eXBlLnJlcGVhdCkge1xyXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUucmVwZWF0ID0gZnVuY3Rpb24obGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICAgICAgdmFyIHJlcGVhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyByZXBlYXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY29saXRlID0gYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbGl0ZScsIFsnbmdDb3Jkb3ZhJ10pXHJcbiAgICAgICAgLy8gc2VydmnDp29zIFxyXG4gICAgICAgIC5zZXJ2aWNlKCckY29saXRlJywgQ29saXRlKVxyXG4gICAgICAgIC8vIGNvbnN0YW50ZXMgXHJcbiAgICAgICAgLmNvbnN0YW50KCdDb2xpdGUnLCB7XHJcbiAgICAgICAgICAgIFNUUklORzogXCJTVFJJTkdcIixcclxuICAgICAgICAgICAgSU5URUdFUjogXCJJTlRFR0VSXCIsXHJcbiAgICAgICAgICAgIERBVEU6IFwiREFURVwiLFxyXG4gICAgICAgICAgICBEQVRFVElNRTogXCJEQVRFVElNRVwiLFxyXG4gICAgICAgICAgICBCSUdJTlQ6IFwiQklHSU5UXCIsXHJcbiAgICAgICAgICAgIERFQ0lNQUw6IFwiTlVNRVJJQ1wiLFxyXG4gICAgICAgICAgICBURVhUOiBcIlRFWFRcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGNvcmRvdmEucGxhdGZvcm1JZCk7XHJcbiAgICBpZiAoaXNCcm93c2VyKSB7XHJcbiAgICAgICAgQ29saXRlLiRpbmplY3QgPSBbJyRjb3Jkb3ZhU1FMaXRlJ107XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQ29saXRlKCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmlzRGV2aWNlUmVhZHkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdm0uY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0geyBuYW1lOiAnZGF0YWJhc2UuZGInLCBsb2NhdGlvbjogJ2RlZmF1bHQnLCBiZ1R5cGU6IDEgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkY29yZG92YVNRTGl0ZS5vcGVuREIoY29uZmlnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmV4ZWN1dGUgPSBmdW5jdGlvbihxdWVyeSwgdmFsdWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkY29yZG92YVNRTGl0ZS5leGVjdXRlKHZtLmNvbm5lY3QoKSwgcXVlcnksIHZhbHVlcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2g6IGZ1bmN0aW9uKCkge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmRldmljZXJlYWR5ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgLy8gY2FzbyBkaXNwb3NpdGl2byBqw6EgZXN0ZWphIHByb250byBuw6NvIGFkaWNpb25hIEV2ZW50TGlzdGVuZXIsIGFwZW5hcyBleGVjdXRhLlxyXG4gICAgICAgICAgICBpZiAodm0uaXNEZXZpY2VSZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0uZGV2aWNlcmVhZHkoZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdm0uaXNEZXZpY2VSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLm9ybSA9IHtcclxuICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBbJ0RST1AgVEFCTEUgSUYgRVhJU1RTJywgdGhpcy5kaXNwbGF5TmFtZV0uam9pbignICAnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3JlYXRlID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobW9kZWwucHJvdG90eXBlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wT2JqID0gbW9kZWwuYmFzZVtrZXldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsIGtleSwgcHJvcE9iai50eXBlXS5qb2luKCcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wT2JqLmFsbG93TnVsbHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBbcHJvcCwgJ05VTEwnXS5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsICdOT1QgTlVMTCddLmpvaW4oJyAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BPYmoucHJpbWFyeUtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IFtwcm9wLCAnUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCddLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BPYmoudW5pcXVlS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsICdVTklRVUUnXS5qb2luKCcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZS5wdXNoKHByb3ApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gWydDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUycsIHRoaXMuZGlzcGxheU5hbWUsICcoJywgY3JlYXRlLmpvaW4oJywgJyksICcpJ10uam9pbignICAnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaW5zZXJ0OiBmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobW9kZWwucHJvdG90eXBlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9ICdpZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0LnB1c2goa2V5KTsgLy8gcHJvcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3Rba2V5XSk7IC8vIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJyBpbnNlcnQgaW50byB7MH0gKCB7MX0gKSB2YWx1ZXMgKCA/IHsyfSApICcuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydC5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgICcsID8nLnJlcGVhdCh2YWx1ZXMubGVuZ3RoIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGUgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtb2RlbC5wcm90b3R5cGUpLmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gJ2lkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHVzaChrZXkgKyAnID0gPycpOyAvLyBwcm9wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdFtrZXldKTsgLy8gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJyB1cGRhdGUgezB9IHNldCB7MX0gd2hlcmUgaWQgPSA/ICcuZm9ybWF0KG1vZGVsLmRpc3BsYXlOYW1lLCB1cGRhdGUuam9pbignLCAnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXhlY3V0ZShxdWVyeSwgdmFsdWVzKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9ICcgZGVsZXRlIGZyb20gezB9IHdoZXJlIGlkID0gPyAnLmZvcm1hdChtb2RlbC5kaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXhlY3V0ZShxdWVyeSwgW2lkXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9ICcgc2VsZWN0ICogZnJvbSB7MH0gJy5mb3JtYXQoW3RoaXMuZGlzcGxheU5hbWVdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ICsgJyB3aGVyZSBpZCA9ID8gJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXhlY3V0ZShxdWVyeSwgW2lkXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmltcGxlbWVudCA9IGZ1bmN0aW9uKG5hbWUsIGJhc2UsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgIC8vIGltcGxlbWVudGHDp8OjbyBkbyBtb2RlbG8gZW0gdW0gb2JqZXRvLlxyXG4gICAgICAgICAgICBmdW5jdGlvbiBtb2RlbCgpIHt9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGJhc2UpLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgbW9kZWwucHJvdG90eXBlW3Byb3BdID0gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1vZGVsLnByb3RvdHlwZS5pZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBtb2RlbC5kaXNwbGF5TmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIG1vZGVsLmJhc2UgPSBiYXNlO1xyXG5cclxuICAgICAgICAgICAgbW9kZWwuZHJvcCA9IHZtLm9ybS5kcm9wO1xyXG4gICAgICAgICAgICBtb2RlbC5jcmVhdGUgPSB2bS5vcm0uY3JlYXRlO1xyXG4gICAgICAgICAgICBtb2RlbC5pbnNlcnQgPSB2bS5vcm0uaW5zZXJ0O1xyXG4gICAgICAgICAgICBtb2RlbC51cGRhdGUgPSB2bS5vcm0udXBkYXRlO1xyXG4gICAgICAgICAgICBtb2RlbC5kZWxldGUgPSB2bS5vcm0uZGVsZXRlO1xyXG4gICAgICAgICAgICBtb2RlbC5zZWxlY3QgPSB2bS5vcm0uc2VsZWN0O1xyXG5cclxuICAgICAgICAgICAgdm0uZGV2aWNlcmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZHJvcCgpO1xyXG4gICAgICAgICAgICAgICAgbW9kZWwuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRldmljZXJlYWR5OiB2bS5kZXZpY2VyZWFkeSxcclxuICAgICAgICAgICAgaW1wbGVtZW50OiB2bS5pbXBsZW1lbnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KCkpOyJdfQ==
