!function(){"use strict";function e(e){var t=this;return t.isDeviceReady=!1,t.connect=function(){var t={name:"database.db",location:"default",bgType:1};return e.openDB(t)},t.execute=function(r,n){return e.execute(t.connect(),r,n)},t.deviceready=function(e){t.isDeviceReady?e():document.addEventListener("deviceready",function(){e()},!1)},t.orm={drop:function(){var e=["DROP TABLE IF EXISTS",this.displayName].join("  ");return t.execute(e)},create:function(){var e=this,r=[];Object.keys(e.prototype).forEach(function(t,n){var o="",i=e.base[t];o=[o,t,i.type].join(" "),o=i.allowNulls?[o,"NULL"].join(" "):[o,"NOT NULL"].join(" "),i.primaryKey?o=[o,"PRIMARY KEY AUTOINCREMENT"].join(" "):i.uniqueKey&&(o=[o,"UNIQUE"].join(" ")),r.push(o)});var n=["CREATE TABLE IF NOT EXISTS",this.displayName,"(",r.join(", "),")"].join("  ");return t.execute(n)},insert:function(e){var r=this,n=[],o=[];Object.keys(r.prototype).forEach(function(t,r){"id"!=t&&(n.push(t),o.push(e[t]))});var i=" insert into {0} ( {1} ) values ( ? {2} ) ".format(r.displayName,n.join(", "),", ?".repeat(o.length-1));return t.execute(i,o)},update:function(e){var r=this,n=[],o=[];Object.keys(r.prototype).forEach(function(t,r){"id"!=t&&(n.push(t+" = ?"),o.push(e[t]))}),o.push(e.id);var i=" update {0} set {1} where id = ? ".format(r.displayName,n.join(", "));return t.execute(i,o)},delete:function(e){var r=this,n=" delete from {0} where id = ? ".format(r.displayName);return t.execute(n,[e])},select:function(e){var r=" select * from {0} ".format([this.displayName]);return e?(r+=" where id = ? ",t.execute(r,[e])):t.execute(r)}},t.implement=function(e,r,n){function o(){}return Object.keys(r).forEach(function(e){o.prototype[e]=null}),o.prototype.id=null,o.displayName=e,o.base=r,o.drop=t.orm.drop,o.create=t.orm.create,o.insert=t.orm.insert,o.update=t.orm.update,o.delete=t.orm.delete,o.select=t.orm.select,t.deviceready(function(){n&&o.drop(),o.create()}),o},{deviceready:t.deviceready,implement:t.implement}}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})}),String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",r=this,n=0;n<e;n++)t+=r;return t});angular.module("Colite",["ngCordova"]).service("$colite",e).constant("Colite",{STRING:"STRING",INTEGER:"INTEGER",DATE:"DATE",DATETIME:"DATETIME",BIGINT:"BIGINT",DECIMAL:"NUMERIC",TEXT:"TEXT"});e.$inject=["$cordovaSQLite"]}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGl0ZS5qcyJdLCJuYW1lcyI6WyJDb2xpdGUiLCIkY29yZG92YVNRTGl0ZSIsInZtIiwidGhpcyIsImlzRGV2aWNlUmVhZHkiLCJjb25uZWN0IiwiY29uZmlnIiwibmFtZSIsImxvY2F0aW9uIiwiYmdUeXBlIiwib3BlbkRCIiwiZXhlY3V0ZSIsInF1ZXJ5IiwidmFsdWVzIiwiZGV2aWNlcmVhZHkiLCJjYWxsYmFjayIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9ybSIsImRyb3AiLCJkaXNwbGF5TmFtZSIsImpvaW4iLCJjcmVhdGUiLCJtb2RlbCIsIk9iamVjdCIsImtleXMiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJwcm9wIiwicHJvcE9iaiIsImJhc2UiLCJ0eXBlIiwiYWxsb3dOdWxscyIsInByaW1hcnlLZXkiLCJ1bmlxdWVLZXkiLCJwdXNoIiwiaW5zZXJ0Iiwib2JqZWN0IiwiZm9ybWF0IiwicmVwZWF0IiwibGVuZ3RoIiwidXBkYXRlIiwiaWQiLCJkZWxldGUiLCJzZWxlY3QiLCJpbXBsZW1lbnQiLCJmb3JjZSIsIlN0cmluZyIsImFyZ3MiLCJhcmd1bWVudHMiLCJyZXBsYWNlIiwibWF0Y2giLCJudW1iZXIiLCJzdHIiLCJpIiwiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2UiLCJjb25zdGFudCIsIlNUUklORyIsIklOVEVHRVIiLCJEQVRFIiwiREFURVRJTUUiLCJCSUdJTlQiLCJERUNJTUFMIiwiVEVYVCIsIiRpbmplY3QiXSwibWFwcGluZ3MiOiJDQUFDLFdBQ0csWUEwQ0EsU0FBU0EsR0FBT0MsR0FDWixHQUFJQyxHQUFLQyxJQXVJVCxPQXJJQUQsR0FBR0UsZUFBZ0IsRUFFbkJGLEVBQUdHLFFBQVUsV0FDVCxHQUFJQyxJQUFXQyxLQUFNLGNBQWVDLFNBQVUsVUFBV0MsT0FBUSxFQUNqRSxPQUFPUixHQUFlUyxPQUFPSixJQUdqQ0osRUFBR1MsUUFBVSxTQUFTQyxFQUFPQyxHQUN6QixNQUFP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SUFBSTRCLE9BRXRCNUMsRUFBR1ksWUFBWSxXQUNQa0MsR0FDQXpCLEVBQU1KLE9BQ1ZJLEVBQU1ELFdBR0hDLElBSVBULFlBQWFaLEVBQUdZLFlBQ2hCaUMsVUFBVzdDLEVBQUc2QyxXQWxMakJFLE9BQU92QixVQUFVYyxTQUNsQlMsT0FBT3ZCLFVBQVVjLE9BQVMsV0FDdEIsR0FBSVUsR0FBT0MsU0FDWCxPQUFPaEQsTUFBS2lELFFBQVEsV0FBWSxTQUFTQyxFQUFPQyxHQUM1QyxXQUE4QixLQUFoQkosRUFBS0ksR0FDZkosRUFBS0ksR0FDTEQsTUFJWEosT0FBT3ZCLFVBQVVlLFNBQ2xCUSxPQUFPdkIsVUFBVWUsT0FBUyxTQUFTQyxHQUkvQixJQUFLLEdBSERhLEdBQU0sR0FDTmQsRUFBU3RDLEtBRUpxRCxFQUFJLEVBQUdBLEVBQUlkLEVBQVFjLElBQ3hCRCxHQUFZZCxDQUdoQixPQUFPYyxJQUlGRSxTQUNSQyxPQUFPLFVBQVcsY0FFbEJDLFFBQVEsVUFBVzNELEdBRW5CNEQsU0FBUyxVQUNOQyxPQUFRLFNBQ1JDLFFBQVMsVUFDVEMsS0FBTSxPQUNOQyxTQUFVLFdBQ1ZDLE9BQVEsU0FDUkMsUUFBUyxVQUNUQyxLQUFNLFFBR2RuRSxHQUFPb0UsU0FBVyIsImZpbGUiOiJjb2xpdGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gICAgaWYgKCFTdHJpbmcucHJvdG90eXBlLmZvcm1hdCkge1xyXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPSAndW5kZWZpbmVkJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tudW1iZXJdIDpcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlmICghU3RyaW5nLnByb3RvdHlwZS5yZXBlYXQpIHtcclxuICAgICAgICBTdHJpbmcucHJvdG90eXBlLnJlcGVhdCA9IGZ1bmN0aW9uKGxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgIHZhciByZXBlYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gc3RyICsgcmVwZWF0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNvbGl0ZSA9IGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb2xpdGUnLCBbJ25nQ29yZG92YSddKVxyXG4gICAgICAgIC8vIHNlcnZpw6dvcyBcclxuICAgICAgICAuc2VydmljZSgnJGNvbGl0ZScsIENvbGl0ZSlcclxuICAgICAgICAvLyBjb25zdGFudGVzIFxyXG4gICAgICAgIC5jb25zdGFudCgnQ29saXRlJywge1xyXG4gICAgICAgICAgICBTVFJJTkc6IFwiU1RSSU5HXCIsXHJcbiAgICAgICAgICAgIElOVEVHRVI6IFwiSU5URUdFUlwiLFxyXG4gICAgICAgICAgICBEQVRFOiBcIkRBVEVcIixcclxuICAgICAgICAgICAgREFURVRJTUU6IFwiREFURVRJTUVcIixcclxuICAgICAgICAgICAgQklHSU5UOiBcIkJJR0lOVFwiLFxyXG4gICAgICAgICAgICBERUNJTUFMOiBcIk5VTUVSSUNcIixcclxuICAgICAgICAgICAgVEVYVDogXCJURVhUXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBDb2xpdGUuJGluamVjdCA9IFsnJGNvcmRvdmFTUUxpdGUnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb2xpdGUoJGNvcmRvdmFTUUxpdGUpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5pc0RldmljZVJlYWR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHZtLmNvbm5lY3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHsgbmFtZTogJ2RhdGFiYXNlLmRiJywgbG9jYXRpb246ICdkZWZhdWx0JywgYmdUeXBlOiAxIH07XHJcbiAgICAgICAgICAgIHJldHVybiAkY29yZG92YVNRTGl0ZS5vcGVuREIoY29uZmlnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmV4ZWN1dGUgPSBmdW5jdGlvbihxdWVyeSwgdmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkY29yZG92YVNRTGl0ZS5leGVjdXRlKHZtLmNvbm5lY3QoKSwgcXVlcnksIHZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5kZXZpY2VyZWFkeSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIC8vIGNhc28gZGlzcG9zaXRpdm8gasOhIGVzdGVqYSBwcm9udG8gbsOjbyBhZGljaW9uYSBFdmVudExpc3RlbmVyLCBhcGVuYXMgZXhlY3V0YS5cclxuICAgICAgICAgICAgaWYgKHZtLmlzRGV2aWNlUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLm9ybSA9IHtcclxuICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBbJ0RST1AgVEFCTEUgSUYgRVhJU1RTJywgdGhpcy5kaXNwbGF5TmFtZV0uam9pbignICAnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3JlYXRlID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobW9kZWwucHJvdG90eXBlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wT2JqID0gbW9kZWwuYmFzZVtrZXldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsIGtleSwgcHJvcE9iai50eXBlXS5qb2luKCcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wT2JqLmFsbG93TnVsbHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBbcHJvcCwgJ05VTEwnXS5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsICdOT1QgTlVMTCddLmpvaW4oJyAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BPYmoucHJpbWFyeUtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IFtwcm9wLCAnUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCddLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BPYmoudW5pcXVlS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsICdVTklRVUUnXS5qb2luKCcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZS5wdXNoKHByb3ApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gWydDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUycsIHRoaXMuZGlzcGxheU5hbWUsICcoJywgY3JlYXRlLmpvaW4oJywgJyksICcpJ10uam9pbignICAnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaW5zZXJ0OiBmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobW9kZWwucHJvdG90eXBlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9ICdpZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0LnB1c2goa2V5KTsgLy8gcHJvcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3Rba2V5XSk7IC8vIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJyBpbnNlcnQgaW50byB7MH0gKCB7MX0gKSB2YWx1ZXMgKCA/IHsyfSApICcuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydC5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgICAgICcsID8nLnJlcGVhdCh2YWx1ZXMubGVuZ3RoIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGUgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtb2RlbC5wcm90b3R5cGUpLmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gJ2lkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucHVzaChrZXkgKyAnID0gPycpOyAvLyBwcm9wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdFtrZXldKTsgLy8gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChvYmplY3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJyB1cGRhdGUgezB9IHNldCB7MX0gd2hlcmUgaWQgPSA/ICcuZm9ybWF0KG1vZGVsLmRpc3BsYXlOYW1lLCB1cGRhdGUuam9pbignLCAnKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXhlY3V0ZShxdWVyeSwgdmFsdWVzKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9ICcgZGVsZXRlIGZyb20gezB9IHdoZXJlIGlkID0gPyAnLmZvcm1hdChtb2RlbC5kaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXhlY3V0ZShxdWVyeSwgW2lkXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlbGVjdDogZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9ICcgc2VsZWN0ICogZnJvbSB7MH0gJy5mb3JtYXQoW3RoaXMuZGlzcGxheU5hbWVdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5ICsgJyB3aGVyZSBpZCA9ID8gJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0uZXhlY3V0ZShxdWVyeSwgW2lkXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmltcGxlbWVudCA9IGZ1bmN0aW9uKG5hbWUsIGJhc2UsIGZvcmNlKSB7XHJcbiAgICAgICAgICAgIC8vIGltcGxlbWVudGHDp8OjbyBkbyBtb2RlbG8gZW0gdW0gb2JqZXRvLlxyXG4gICAgICAgICAgICBmdW5jdGlvbiBtb2RlbCgpIHt9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGJhc2UpLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgbW9kZWwucHJvdG90eXBlW3Byb3BdID0gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1vZGVsLnByb3RvdHlwZS5pZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBtb2RlbC5kaXNwbGF5TmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIG1vZGVsLmJhc2UgPSBiYXNlO1xyXG5cclxuICAgICAgICAgICAgbW9kZWwuZHJvcCA9IHZtLm9ybS5kcm9wO1xyXG4gICAgICAgICAgICBtb2RlbC5jcmVhdGUgPSB2bS5vcm0uY3JlYXRlO1xyXG4gICAgICAgICAgICBtb2RlbC5pbnNlcnQgPSB2bS5vcm0uaW5zZXJ0O1xyXG4gICAgICAgICAgICBtb2RlbC51cGRhdGUgPSB2bS5vcm0udXBkYXRlO1xyXG4gICAgICAgICAgICBtb2RlbC5kZWxldGUgPSB2bS5vcm0uZGVsZXRlO1xyXG4gICAgICAgICAgICBtb2RlbC5zZWxlY3QgPSB2bS5vcm0uc2VsZWN0O1xyXG5cclxuICAgICAgICAgICAgdm0uZGV2aWNlcmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZHJvcCgpO1xyXG4gICAgICAgICAgICAgICAgbW9kZWwuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRldmljZXJlYWR5OiB2bS5kZXZpY2VyZWFkeSxcclxuICAgICAgICAgICAgaW1wbGVtZW50OiB2bS5pbXBsZW1lbnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KCkpOyJdfQ==
