!function(){"use strict";function e(){var e=this;return e.connect=function(){var e={name:"database.db",location:"default",bgType:1};return $cordovaSQLite.openDB(e)},e.execute=function(t,r){return $cordovaSQLite.execute(e.connect(),t,r)},e.deviceready=function(e){document.addEventListener("deviceready",function(){e()},!1)},e.orm={drop:function(){var t=["DROP TABLE IF EXISTS",this.displayName].join("  ");return e.execute(t)},create:function(){var t=this,r=[];Object.keys(t.prototype).forEach(function(e,n){var o="",i=t.base[e];o=[o,e,i.type].join(" "),o=i.allowNulls?[o,"NULL"].join(" "):[o,"NOT NULL"].join(" "),i.primaryKey?o=[o,"PRIMARY KEY AUTOINCREMENT"].join(" "):i.uniqueKey&&(o=[o,"UNIQUE"].join(" ")),r.push(o)});var n=["CREATE TABLE IF NOT EXISTS",this.displayName,"(",r.join(", "),")"].join("  ");return e.execute(n)},insert:function(t){var r=this,n=[],o=[];Object.keys(r.prototype).forEach(function(e,r){"id"!=e&&(n.push(e),o.push(t[e]))});var i=" insert into {0} ( {1} ) values ( ? {2} ) ".format(r.displayName,n.join(", "),", ?".repeat(o.length-1));return e.execute(i,o)},update:function(t){var r=this,n=[],o=[];Object.keys(r.prototype).forEach(function(e,r){"id"!=e&&(n.push(e+" = ?"),o.push(t[e]))}),o.push(t.id);var i=" update {0} set {1} where id = ? ".format(r.displayName,n.join(", "));return e.execute(i,o)},delete:function(t){var r=this,n=" delete from {0} where id = ? ".format(r.displayName);return e.execute(n,[t])},select:function(t){var r=" select * from {0} ".format([this.displayName]);return t?(r+=" where id = ? ",e.execute(r,[t])):e.execute(r)}},e.implement=function(t,r,n){function o(){}return Object.keys(r).forEach(function(e){o.prototype[e]=null}),o.prototype.id=null,o.displayName=t,o.base=r,o.drop=e.orm.drop,o.create=e.orm.create,o.insert=e.orm.insert,o.update=e.orm.update,o.delete=e.orm.delete,o.select=e.orm.select,e.deviceready(function(){n&&o.drop(),o.create()}),o},{deviceready:e.deviceready,implement:e.implement}}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})}),String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",r=this,n=0;n<e;n++)t+=r;return t});angular.module("Colite",["ngCordova"]).service("$colite",e).constant("Colite",{STRING:"STRING",INTEGER:"INTEGER",DATE:"DATE",DATETIME:"DATETIME",BIGINT:"BIGINT",DECIMAL:"NUMERIC",TEXT:"TEXT"});e.$inject=["$cordovaSQLite"]}();
!function(){"use strict";function e(){return function(e){$timeout(function(){$scope.$apply(function(){document.addEventListener("deviceready",function(){e()},!1)})})}}angular.module("ngDeviceready",[]).service("$deviceready",e);e.$inject=["$scope","$timeout"]}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGl0ZS5qcyIsImRldmljZXJlYWR5LmpzIl0sIm5hbWVzIjpbIkNvbGl0ZSIsInZtIiwidGhpcyIsImNvbm5lY3QiLCJjb25maWciLCJuYW1lIiwibG9jYXRpb24iLCJiZ1R5cGUiLCIkY29yZG92YVNRTGl0ZSIsIm9wZW5EQiIsImV4ZWN1dGUiLCJxdWVyeSIsInZhbHVlcyIsImRldmljZXJlYWR5IiwiY2FsbGJhY2siLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcm0iLCJkcm9wIiwiZGlzcGxheU5hbWUiLCJqb2luIiwiY3JlYXRlIiwibW9kZWwiLCJPYmplY3QiLCJrZXlzIiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwicHJvcCIsInByb3BPYmoiLCJiYXNlIiwidHlwZSIsImFsbG93TnVsbHMiLCJwcmltYXJ5S2V5IiwidW5pcXVlS2V5IiwicHVzaCIsImluc2VydCIsIm9iamVjdCIsImZvcm1hdCIsInJlcGVhdCIsImxlbmd0aCIsInVwZGF0ZSIsImlkIiwiZGVsZXRlIiwic2VsZWN0IiwiaW1wbGVtZW50IiwiZm9yY2UiLCJTdHJpbmciLCJhcmdzIiwiYXJndW1lbnRzIiwicmVwbGFjZSIsIm1hdGNoIiwibnVtYmVyIiwic3RyIiwiaSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwiY29uc3RhbnQiLCJTVFJJTkciLCJJTlRFR0VSIiwiREFURSIsIkRBVEVUSU1FIiwiQklHSU5UIiwiREVDSU1BTCIsIlRFWFQiLCIkaW5qZWN0IiwiRGV2aWNlUmVhZHkiLCIkdGltZW91dCIsIiRzY29wZSIsIiRhcHBseSJdLCJtYXBwaW5ncyI6IkNBQUMsV0FDRyxZQTBDQSxTQUFTQSxLQUNMLEdBQUlDLEdBQUtDLElBZ0lULE9BOUhBRCxHQUFHRSxRQUFVLFdBQ1QsR0FBSUMsSUFBV0MsS0FBTSxjQUFlQyxTQUFVLFVBQVdDLE9BQVEsRUFDakUsT0FBT0MsZ0JBQWVDLE9BQU9MLElBR2pDSCxFQUFHUyxRQUFVLFNB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Z0IsSUFBSTRCLE9BRXRCNUMsRUFBR1ksWUFBWSxXQUNQa0MsR0FDQXpCLEVBQU1KLE9BQ1ZJLEVBQU1ELFdBR0hDLElBSVBULFlBQWFaLEVBQUdZLFlBQ2hCaUMsVUFBVzdDLEVBQUc2QyxXQTNLakJFLE9BQU92QixVQUFVYyxTQUNsQlMsT0FBT3ZCLFVBQVVjLE9BQVMsV0FDdEIsR0FBSVUsR0FBT0MsU0FDWCxPQUFPaEQsTUFBS2lELFFBQVEsV0FBWSxTQUFTQyxFQUFPQyxHQUM1QyxXQUE4QixLQUFoQkosRUFBS0ksR0FDZkosRUFBS0ksR0FDTEQsTUFJWEosT0FBT3ZCLFVBQVVlLFNBQ2xCUSxPQUFPdkIsVUFBVWUsT0FBUyxTQUFTQyxHQUkvQixJQUFLLEdBSERhLEdBQU0sR0FDTmQsRUFBU3RDLEtBRUpxRCxFQUFJLEVBQUdBLEVBQUlkLEVBQVFjLElBQ3hCRCxHQUFZZCxDQUdoQixPQUFPYyxJQUlGRSxTQUNSQyxPQUFPLFVBQVcsY0FFbEJDLFFBQVEsVUFBVzFELEdBRW5CMkQsU0FBUyxVQUNOQyxPQUFRLFNBQ1JDLFFBQVMsVUFDVEMsS0FBTSxPQUNOQyxTQUFVLFdBQ1ZDLE9BQVEsU0FDUkMsUUFBUyxVQUNUQyxLQUFNLFFBR2RsRSxHQUFPbUUsU0FBVztDQ3pDckIsV0FDRyxZQVFBLFNBQVNDLEtBQ0wsTUFBTyxVQUFTdEQsR0FDWnVELFNBQVMsV0FDTEMsT0FBT0MsT0FBTyxXQUNWeEQsU0FBU0MsaUJBQWlCLGNBQWUsV0FDckNGLE1BQ0QsUUFaRDBDLFFBQ2JDLE9BQU8sb0JBQ1BDLFFBQVEsZUFBZ0JVLEVBRTdCQSxHQUFZRCxTQUFXLFNBQVUiLCJmaWxlIjoiY29saXRlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0J1xyXG5cclxuICAgIGlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpIHtcclxuICAgICAgICBTdHJpbmcucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24obWF0Y2gsIG51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT0gJ3VuZGVmaW5lZCcgP1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbbnVtYmVyXSA6XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2g7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBpZiAoIVN0cmluZy5wcm90b3R5cGUucmVwZWF0KSB7XHJcbiAgICAgICAgU3RyaW5nLnByb3RvdHlwZS5yZXBlYXQgPSBmdW5jdGlvbihsZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgcmVwZWF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9IHN0ciArIHJlcGVhdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjb2xpdGUgPSBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29saXRlJywgWyduZ0NvcmRvdmEnXSlcclxuICAgICAgICAvLyBzZXJ2acOnb3MgXHJcbiAgICAgICAgLnNlcnZpY2UoJyRjb2xpdGUnLCBDb2xpdGUpXHJcbiAgICAgICAgLy8gY29uc3RhbnRlcyBcclxuICAgICAgICAuY29uc3RhbnQoJ0NvbGl0ZScsIHtcclxuICAgICAgICAgICAgU1RSSU5HOiBcIlNUUklOR1wiLFxyXG4gICAgICAgICAgICBJTlRFR0VSOiBcIklOVEVHRVJcIixcclxuICAgICAgICAgICAgREFURTogXCJEQVRFXCIsXHJcbiAgICAgICAgICAgIERBVEVUSU1FOiBcIkRBVEVUSU1FXCIsXHJcbiAgICAgICAgICAgIEJJR0lOVDogXCJCSUdJTlRcIixcclxuICAgICAgICAgICAgREVDSU1BTDogXCJOVU1FUklDXCIsXHJcbiAgICAgICAgICAgIFRFWFQ6IFwiVEVYVFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgQ29saXRlLiRpbmplY3QgPSBbJyRjb3Jkb3ZhU1FMaXRlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gQ29saXRlKCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmNvbm5lY3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHsgbmFtZTogJ2RhdGFiYXNlLmRiJywgbG9jYXRpb246ICdkZWZhdWx0JywgYmdUeXBlOiAxIH07XHJcbiAgICAgICAgICAgIHJldHVybiAkY29yZG92YVNRTGl0ZS5vcGVuREIoY29uZmlnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmV4ZWN1dGUgPSBmdW5jdGlvbihxdWVyeSwgdmFsdWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkY29yZG92YVNRTGl0ZS5leGVjdXRlKHZtLmNvbm5lY3QoKSwgcXVlcnksIHZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5kZXZpY2VyZWFkeSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0ub3JtID0ge1xyXG4gICAgICAgICAgICBkcm9wOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IFsnRFJPUCBUQUJMRSBJRiBFWElTVFMnLCB0aGlzLmRpc3BsYXlOYW1lXS5qb2luKCcgICcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLmV4ZWN1dGUocXVlcnkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBjcmVhdGUgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtb2RlbC5wcm90b3R5cGUpLmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BPYmogPSBtb2RlbC5iYXNlW2tleV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb3AgPSBbcHJvcCwga2V5LCBwcm9wT2JqLnR5cGVdLmpvaW4oJyAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BPYmouYWxsb3dOdWxscylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IFtwcm9wLCAnTlVMTCddLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBbcHJvcCwgJ05PVCBOVUxMJ10uam9pbignICcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcE9iai5wcmltYXJ5S2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gW3Byb3AsICdQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5UJ10uam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcE9iai51bmlxdWVLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBbcHJvcCwgJ1VOSVFVRSddLmpvaW4oJyAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlLnB1c2gocHJvcCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBbJ0NSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTJywgdGhpcy5kaXNwbGF5TmFtZSwgJygnLCBjcmVhdGUuam9pbignLCAnKSwgJyknXS5qb2luKCcgICcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLmV4ZWN1dGUocXVlcnkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpbnNlcnQ6IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBpbnNlcnQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtb2RlbC5wcm90b3R5cGUpLmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gJ2lkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQucHVzaChrZXkpOyAvLyBwcm9wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdFtrZXldKTsgLy8gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSAnIGluc2VydCBpbnRvIHswfSAoIHsxfSApIHZhbHVlcyAoID8gezJ9ICkgJy5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0LmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgJywgPycucmVwZWF0KHZhbHVlcy5sZW5ndGggLSAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLmV4ZWN1dGUocXVlcnksIHZhbHVlcyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVwZGF0ZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1vZGVsLnByb3RvdHlwZSkuZm9yRWFjaChmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAhPSAnaWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5wdXNoKGtleSArICcgPSA/Jyk7IC8vIHByb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2gob2JqZWN0W2tleV0pOyAvLyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdC5pZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSAnIHVwZGF0ZSB7MH0gc2V0IHsxfSB3aGVyZSBpZCA9ID8gJy5mb3JtYXQobW9kZWwuZGlzcGxheU5hbWUsIHVwZGF0ZS5qb2luKCcsICcpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJyBkZWxldGUgZnJvbSB7MH0gd2hlcmUgaWQgPSA/ICcuZm9ybWF0KG1vZGVsLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5LCBbaWRdKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJyBzZWxlY3QgKiBmcm9tIHswfSAnLmZvcm1hdChbdGhpcy5kaXNwbGF5TmFtZV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkgKyAnIHdoZXJlIGlkID0gPyAnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS5leGVjdXRlKHF1ZXJ5LCBbaWRdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZtLmV4ZWN1dGUocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0uaW1wbGVtZW50ID0gZnVuY3Rpb24obmFtZSwgYmFzZSwgZm9yY2UpIHtcclxuICAgICAgICAgICAgLy8gaW1wbGVtZW50YcOnw6NvIGRvIG1vZGVsbyBlbSB1bSBvYmpldG8uXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1vZGVsKCkge31cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoYmFzZSkuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5wcm90b3R5cGVbcHJvcF0gPSBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbW9kZWwucHJvdG90eXBlLmlkID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIG1vZGVsLmRpc3BsYXlOYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgbW9kZWwuYmFzZSA9IGJhc2U7XHJcblxyXG4gICAgICAgICAgICBtb2RlbC5kcm9wID0gdm0ub3JtLmRyb3A7XHJcbiAgICAgICAgICAgIG1vZGVsLmNyZWF0ZSA9IHZtLm9ybS5jcmVhdGU7XHJcbiAgICAgICAgICAgIG1vZGVsLmluc2VydCA9IHZtLm9ybS5pbnNlcnQ7XHJcbiAgICAgICAgICAgIG1vZGVsLnVwZGF0ZSA9IHZtLm9ybS51cGRhdGU7XHJcbiAgICAgICAgICAgIG1vZGVsLmRlbGV0ZSA9IHZtLm9ybS5kZWxldGU7XHJcbiAgICAgICAgICAgIG1vZGVsLnNlbGVjdCA9IHZtLm9ybS5zZWxlY3Q7XHJcblxyXG4gICAgICAgICAgICB2bS5kZXZpY2VyZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JjZSlcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5kcm9wKCk7XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5jcmVhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGV2aWNlcmVhZHk6IHZtLmRldmljZXJlYWR5LFxyXG4gICAgICAgICAgICBpbXBsZW1lbnQ6IHZtLmltcGxlbWVudFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gICAgdmFyIGRldmljZXJlYWR5ID0gYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ25nRGV2aWNlcmVhZHknLCBbXSlcclxuICAgICAgICAuc2VydmljZSgnJGRldmljZXJlYWR5JywgRGV2aWNlUmVhZHkpO1xyXG5cclxuICAgIERldmljZVJlYWR5LiRpbmplY3QgPSBbJyRzY29wZScsICckdGltZW91dCddO1xyXG5cclxuICAgIGZ1bmN0aW9uIERldmljZVJlYWR5KCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSgpKTsiXX0=
